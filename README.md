# Модуль оплаты beGateway для Okay CMS

## Установка

  * [Скачайте архив модуля](https://github.com/beGateway/okaycms-payment-module/raw/master/okaycms-payment-module.zip), распакуйте его и скопируйте его содержимое в корневую директорию вашей Okay CMS инсталляции.

## Настройка

  * Войдите в личный кабинет администратора, откройте Настройки - Оплата и создайте новый вид оплаты, при этом выбрать BeGateway в качестве платежного модуля
  * Указать параметры Идентификатор магазина, Секретный ключ магазина, Домен страницы оплаты и выбрать доступные способы оплаты
  * Установить флажок Активен
  * Остальные параметры в соответствии с конкретными предпочтениями

После этого доступен новый модуль оплаты.

Далее вам нужно отредактировать шаблон вашей темы интернет-магазина. Ниже приведены изменения для шаблона по умолчанию, который находится по пути:

```bash
design/okay_shop/html/payments_form.tpl
```

Отредактируйте данный шаблон и добавьте в его конец следующий код:

```html
{elseif $payment_module == "BeGateway"}
    {* Способ оплаты BeGateway *}
    <div class="row">
    {if $error }
         <div class="message_error">
             Ошибка получения токена на оплату! {$error_message|escape}
         </div>
    {else}
         <form class="col-lg-7" method="post" action="{$action}">
             <input type="hidden" name="token" value="{$token|escape}"/>
             <input type="submit" name="submit-button" value="{$lang->form_to_pay}" class="button">
         </form>
    {/if}
    </div>
{/if}
```

## Примечания

Разработано и протестировано c OkayCMS 2.0.1

## Тестовые данные

Вы можете использовать приведенные ниже тестовые данные, чтобы протестировать оплату. При переключении в рабочий режим обязательно задайте свои данные, выданные вашим провайдером платежей.

  * Id магазина __361__
  * Секретный ключ магазина __b8647b68898b084b836474ed8d61ffe117c9a01168d867f24953b776ddcb134d__
  * Домен страницы оплаты __checkout.begateway.com__
